<!DOCTYPE html>
<html>
<head>
  <title>Image Upload</title>
  <script>
    var projectId = 23; //random default

    function updateProjectId(input) {
      //should validate its a valid number
      projectId = Number(input.value);
    }
    function onUploadImage(form) {
      var actionUrl = "http://localhost/superoffice80/api/v1/project/" + projectId + "/image";
      form.action = actionUrl;
    }
    function onGetId(button) {
      var actionUrl = "http://localhost/superoffice80/api/v1/project/" + projectId + "/image?ifBlank=2";
      button.form.action = actionUrl;
      var img = document.getElementById('projectimg')
      img.src = actionUrl;
      return false;
    }
  </script>
</head>
<body>
  <h1>Images</h1>
  <img id='projectimg' src=''>

  <form id='formUpload' onsubmit="return onUploadImage(this)" action="#"method="post" enctype="multipart/form-data">
    <fieldset>
      <legend>Project Information</legend>
      <br />
      Project ID:<br />
      <input id='projectid' name='projectid' value='23' onkeyup="updateProjectId(this)">
      <br /><br />
      <button type="submit" formaction="#" formmethod="get" onclick="return onGetId(this)">Get Image</button>
      <br /><br />
      Project Image: <br />
      <input accept="image/*" id="projectImg" name='projectimg' type="file">
      <br /><br />
      <button type="submit">Upload Project Image</button>
    </fieldset>
  </form>
</body>
</html>